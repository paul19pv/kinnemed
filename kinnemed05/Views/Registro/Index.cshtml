@model IEnumerable<kinnemed05.Models.registro>

@{
    ViewBag.Title = "Index";
}
<script>
    $(function () {
        $("#fecha").datepicker({
            changeMonth: true,
            changeYear: true,
            dateFormat: "dd/mm/yy"
        });
    });
</script>
<p>
    @Html.ActionLink("Nuevo Registro", "Create", "", new { @class = "btn btn-default" })
    @Html.ActionLink("Registro por Pefil", "Perfil", "", new { @class = "btn btn-default" })
    @Html.ActionLink("Ingresar Resultados", "Insert", "", new { @class = "btn btn-default" })
    @Html.ActionLink("Cargar Resultados", "Cargar", "", new { @class = "btn btn-default" })
    @Html.ActionLink("Reporte por Paciente", "Reporte", "", new { @class = "btn btn-default" })
    @Html.ActionLink("Reporte sin Margen", "ReporteLimpio", "", new { @class = "btn btn-default" })
    @Html.ActionLink("Codigos por Paciente", "Codigo", "", new { @class = "btn btn-default" })
</p>

<div class="panel panel-default">
    <div class="panel-body">
        @using (Html.BeginForm())
        {
            <div class="form-group">
                @Html.Label("Paciente", new { @class = "control-label col-lg-1", @for = "inputDefault" })
                <div class="col-lg-3">
                    @Html.TextBox("searchString", "", new { @class = "form-control", placeholder = "Cédula/Nombres/Apellidos" })
                </div>
                @Html.Label("Fecha", new { @class = "control-label col-lg-1", @for = "inputDefault" })
                <div class="col-lg-2">
                    @Html.TextBox("fecha","", new { @class = "form-control"})
                </div>
                <input type="submit" value="Filtrar" class="btn btn-primary" />
                <input type="submit" id="exportar" name="exportar" value="Exportar" class="btn btn-default" />
            </div>
        }
    </div>
</div>

<div class="panel panel-default">
    <div class="panel-body">
        <table class="table table-striped table-hover ">
            <tr>
                <th>
                    @*@Html.DisplayNameFor(model => model.paciente.pac_nombres) @Html.DisplayNameFor(model => model.paciente.pac_apellidos)*@
                    Paciente
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.reg_orden)
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.reg_fecha)
                </th>
                <th></th>
            </tr>

            
            @foreach (var item in Model)
            {
                <tr>
                    <td>
                        @Html.DisplayFor(modelItem => item.paciente.pac_nombres) @Html.DisplayFor(modelItem => item.paciente.pac_apellidos)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.reg_orden)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.reg_fecha)
                    </td>
                    <td>
                        @Html.ActionLink("Edit", "Edit", new { id = item.reg_id }, new { @class = "iconb icon-edit", @title = "Editar" })
                        @Html.ActionLink("Details", "Details", new { id = item.reg_id }, new { @class = "iconb icon-detail", @title = "Detalle" })
                        @Html.ActionLink("Delete", "Delete", new { id = item.reg_id }, new { @class = "iconb icon-delete", @title = "Borrar" })
                        @{
                if (Model.Count() > 0) {
                    var registro = Model.Last();
                    if (registro!= null) { 
                    if (item.reg_id == registro.reg_id) { 
                        
                    }     
                } 
                    
                }
                                
                
                
                        }
                    </td>
                </tr>
            }

        </table>


    </div>
</div>


